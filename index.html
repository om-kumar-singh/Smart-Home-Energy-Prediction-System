<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Consumption Analyzer</title>
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-bolt me-2"></i>
                Energy Consumption Analyzer
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <button id="theme-toggle" class="btn btn-outline-light">
                            <i class="fas fa-moon"></i> Dark Mode
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Alerts Section -->
        <div id="alerts-container" class="mb-4"></div>

        <!-- Dashboard Header -->
        <div class="row mb-4">
            <div class="col-lg-8">
                <h2>Energy Consumption Dashboard</h2>
                <p class="text-muted">Visualize and predict your energy usage patterns</p>
            </div>
            <div class="col-lg-4 text-end">
                <div class="btn-group" role="group" aria-label="Time Period">
                    <button type="button" class="btn btn-outline-primary period-btn active" data-period="daily">Daily</button>
                    <button type="button" class="btn btn-outline-primary period-btn" data-period="weekly">Weekly</button>
                    <button type="button" class="btn btn-outline-primary period-btn" data-period="monthly">Monthly</button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="row">
            <!-- Main Chart -->
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Energy Consumption</h5>
                        <button id="reset-consumption-zoom" class="btn btn-sm btn-outline-secondary">
                            <i class="fas fa-search-minus"></i> Reset Zoom
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="consumption-chart"></canvas>
                        </div>
                        <div class="text-center mt-2 text-muted small">
                            <i class="fas fa-info-circle"></i> Use mouse wheel to zoom or pinch on mobile
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar Widgets -->
            <div class="col-lg-4">
                <!-- Latest Usage -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">Latest Usage</h5>
                    </div>
                    <div class="card-body text-center">
                        <div class="current-usage-container">
                            <div class="display-4" id="current-usage">--</div>
                            <div class="text-muted">kWh</div>
                        </div>
                        <div class="progress mt-3">
                            <div id="usage-progress" class="progress-bar bg-success" role="progressbar" style="width: 70%"></div>
                        </div>
                    </div>
                </div>

                <!-- Prediction Controls -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">Prediction Controls</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-3">
                            <label for="model-selector" class="d-flex align-items-center">
                                Prediction Model:
                                <i class="fas fa-info-circle ms-2 text-primary" data-bs-toggle="tooltip" data-bs-placement="top" 
                                   title="ARIMA: Statistical time series forecasting model best for short-term predictions with clear patterns. LSTM: Neural network model better at capturing complex long-term dependencies."></i>
                            </label>
                            <select class="form-select" id="model-selector">
                                <option value="arima">ARIMA Model</option>
                                <option value="lstm">LSTM Neural Network</option>
                            </select>
                        </div>
                        <div class="form-group mb-3">
                            <label for="forecast-steps" class="d-flex align-items-center">
                                Forecast Steps:
                                <i class="fas fa-info-circle ms-2 text-primary" data-bs-toggle="tooltip" data-bs-placement="top" 
                                   title="Controls how far into the future to predict. Shorter forecasts (5-10) typically have higher accuracy, while longer forecasts (20-30) show longer-term trends but may have higher uncertainty."></i>
                            </label>
                            <input type="range" class="form-range" min="5" max="30" value="10" id="forecast-steps">
                            <div class="d-flex justify-content-between">
                                <small>5</small>
                                <small id="forecast-value">10</small>
                                <small>30</small>
                            </div>
                        </div>
                        <button id="predict-btn" class="btn btn-primary w-100">Generate Prediction</button>
                    </div>
                </div>

                <!-- Energy Stats -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Energy Statistics</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Average Consumption
                                <span id="stat-average" class="badge bg-primary rounded-pill">--</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Peak Consumption
                                <span id="stat-peak" class="badge bg-danger rounded-pill">--</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                Lowest Consumption
                                <span id="stat-lowest" class="badge bg-success rounded-pill">--</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Prediction Results -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card" id="prediction-results-card" style="display: none;">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Prediction Results</h5>
                        <div>
                            <button id="reset-prediction-zoom" class="btn btn-sm btn-outline-secondary me-2">
                                <i class="fas fa-search-minus"></i> Reset Zoom
                            </button>
                            <span class="badge rounded-pill" id="model-badge">ARIMA</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="prediction-chart"></canvas>
                        </div>
                        <div class="text-center mt-2 text-muted small">
                            <i class="fas fa-info-circle"></i> Use mouse wheel to zoom or pinch on mobile
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Project Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card about-project">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <button class="btn btn-link text-decoration-none" type="button" data-bs-toggle="collapse" data-bs-target="#aboutProjectCollapse" aria-expanded="false" aria-controls="aboutProjectCollapse">
                                <i class="fas fa-info-circle"></i> About This Project
                            </button>
                        </h5>
                    </div>
                    <div class="collapse" id="aboutProjectCollapse">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>SmartHome Energy Predictor</h4>
                                    <p>
                                        This web application helps homeowners visualize and predict their energy consumption patterns. Using historical data from January 2025, it analyzes usage trends and forecasts future consumption.
                                    </p>
                                    <p>
                                        The platform features:
                                    </p>
                                    <ul>
                                        <li>Interactive charts for daily, weekly, or monthly views</li>
                                        <li>Advanced prediction models (ARIMA and LSTM)</li>
                                        <li>Usage statistics and pattern recognition</li>
                                        <li>Dark/light mode toggle for comfortable viewing</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h4>Prediction Accuracy Metrics</h4>
                                    <p>
                                        To assess the accuracy of the energy consumption predictions, the project uses the following evaluation metrics:
                                    </p>
                                    <div class="mb-3">
                                        <span class="metrics-badge metrics-badge-mae">MAE</span>
                                        <strong>Mean Absolute Error</strong> - Measures the average magnitude of errors without considering direction.
                                    </div>
                                    <div class="mb-3">
                                        <span class="metrics-badge metrics-badge-rmse">RMSE</span>
                                        <strong>Root Mean Squared Error</strong> - Penalizes large errors more heavily than small ones.
                                    </div>
                                    <div class="mb-3">
                                        <span class="metrics-badge metrics-badge-r2">R²</span>
                                        <strong>R-squared</strong> - Indicates how well the model fits the observed data (1.0 = perfect fit).
                                    </div>
                                    <p class="text-muted">
                                        Lower MAE and RMSE values indicate better prediction performance, while a higher R² value shows a stronger fit between the model and actual data.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-light mt-5">
        <div class="container py-4">
            <div class="row">
                <div class="col-md-4">
                    <h5><i class="fas fa-bolt text-warning"></i> Energy Consumption Analyzer</h5>
                    <p>Visualize and predict your energy usage patterns with advanced analytics.</p>
                    <p class="mb-0">Data updated: April 2025</p>
                </div>
                <div class="col-md-4">
                    <h5>Features</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-chart-line me-2"></i> Real-time visualization</li>
                        <li><i class="fas fa-brain me-2"></i> AI-powered predictions</li>
                        <li><i class="fas fa-calendar-alt me-2"></i> Daily/Weekly/Monthly views</li>
                        <li><i class="fas fa-moon me-2"></i> Dark/light mode toggle</li>
                    </ul>
                </div>
                <div class="col-md-4 text-md-end">
                    <h5>Smart Energy Solutions</h5>
                    <p>Helping homeowners optimize energy usage since 2025.</p>
                    <div class="d-flex justify-content-end gap-3 mt-3">
                        <a href="#" class="text-light"><i class="fab fa-github fa-lg"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-linkedin fa-lg"></i></a>
                    </div>
                </div>
            </div>
            <hr class="mt-4 mb-3 border-secondary">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0 small">© 2025 Smart Energy Solutions. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0 small">Made with <i class="fas fa-heart text-danger"></i> for energy conscious homeowners</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Chart.js and plugins -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    
    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/chart-utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/theme-switcher.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
